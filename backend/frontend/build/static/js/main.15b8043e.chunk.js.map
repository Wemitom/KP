{"version":3,"sources":["components/LoginButton.js","components/LogoutButton.js","components/AuthButton.js","components/SearchBar.js","components/Header.js","components/Article.js","components/Articles.js","components/routes/NoMatch.js","components/Comment.js","components/Comments.js","components/NewComment.js","components/routes/ArticlePage.js","components/routes/LoginPage.js","components/routes/EditorPage.js","components/ArticleForm.js","components/routes/NewArticlePage.js","components/VerifyEmail.js","components/Category.js","components/Categories.js","components/CategoryForm.js","components/routes/EditArticlePage.js","App.js","auth/Auth0ProviderWithHistory.js","index.js"],"names":["LoginButton","loginWithRedirect","useAuth0","className","onClick","LogoutButton","logout","returnTo","window","location","origin","AuthButton","isAuthenticated","SearchBar","searchedTitle","handleChange","type","value","minLength","maxLength","placeholder","onChange","e","Header","isAdmin","useLocation","to","style","float","marginRight","pathname","match","ArticleImg","React","lazy","Article","id","title","author","date","description","imgURL","onNewArticle","categories","accessToken","category","useParams","user","isLoading","useState","edit","setEdit","success","message","toast","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","handleClick","a","preventDefault","axios","put","_id","find","categ","decodeURIComponent","articles","filter","article","action","articleId","headers","authorization","delete","data","error","undefined","nickname","fallback","getDate","month","monthToString","getMonth","getFullYear","Articles","fetching","displayError","useEffect","categoryArticles","length","filteredArticles","toLowerCase","startsWith","map","Date","color","height","width","top","left","transform","zIndex","NoMatch","Comment","comment","datePosted","timePassedMs","Math","abs","getTime","now","floor","pow","round","calculateTimePosted","marginTop","body","Comments","comments","reversedComments","reverse","NewComment","onNewComment","setBody","redirectLogin","setRedirectLogin","textAlign","borderRadius","resize","target","ArticlePage","setComments","currCategory","useMemo","Prism","highlightAll","ReactHtmlParser","mongoose","Types","ObjectId","LoginPage","EditorPage","initValue","method","returnHome","setReturnHome","posting","setPosting","loading","setLoading","categor","newArticle","hidden","Error","post","state","errorConnecting","initialValue","apiKey","process","init","content_style","setMode","language","menubar","plugins","toolbar","onEditorChange","content","onInit","ArticleForm","textAreaStyle","initTitle","initDescription","initImgURL","initCategory","setTitle","setDescription","setImgURL","setCategory","history","createBrowserHistory","errorStyle","borderColor","backgroundColor","successStyle","onSubmit","push","encodeURIComponent","defaultValue","required","pattern","withAuthenticationRequired","path","useRouteMatch","exact","render","props","VerifyEmail","visibility","cursor","Category","Categories","filteredCategories","CategoryForm","getAccessTokenSilently","handleSubmit","newCategory","audience","scope","oldTitle","currentCategory","currentArticle","App","setCategories","verifyingOpen","setVerifyingOpen","setFetching","setSearchedTitle","setDisplayError","setIsAdmin","setAccessToken","fetchData","get","onClose","email_verified","fetchRole","sub","toString","role","fetchToken","component","Auth0ProviderWithHistory","children","useHistory","domain","clientId","redirectUri","onRedirectCallback","appState","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.15b8043e.chunk.js","sourcesContent":["import React from 'react';\r\nimport { useAuth0 } from '@auth0/auth0-react';\r\nimport 'dotenv/config';\r\n\r\nconst LoginButton = () => {\r\n  const { loginWithRedirect } = useAuth0();\r\n  return (\r\n    <div className=\"login-logout\" onClick={() => loginWithRedirect()}>\r\n      Войти/Зарегистрироваться\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginButton;\r\n","import React from 'react';\r\nimport { useAuth0 } from '@auth0/auth0-react';\r\n\r\nconst LogoutButton = () => {\r\n  const { logout } = useAuth0();\r\n  return (\r\n    <div\r\n      className=\"login-logout\"\r\n      onClick={() =>\r\n        logout({\r\n          returnTo: window.location.origin,\r\n        })\r\n      }\r\n    >\r\n      Выйти\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LogoutButton;\r\n","import React from 'react';\r\n\r\nimport LoginButton from './LoginButton';\r\nimport LogoutButton from './LogoutButton';\r\n\r\nimport { useAuth0 } from '@auth0/auth0-react';\r\n\r\nconst AuthButton = () => {\r\n  const { isAuthenticated } = useAuth0();\r\n\r\n  return isAuthenticated ? <LogoutButton /> : <LoginButton />;\r\n};\r\n\r\nexport default AuthButton;\r\n","// import { AiOutlineSearch } from 'react-icons/ai';\r\n\r\nfunction SearchBar({ searchedTitle, handleChange }) {\r\n  return (\r\n    <div className=\"search-bar\">\r\n      <input\r\n        type=\"text\"\r\n        value={searchedTitle}\r\n        minLength=\"5\"\r\n        maxLength=\"60\"\r\n        placeholder=\"Поиск по названию...\"\r\n        onChange={(e) => {\r\n          handleChange(e);\r\n        }}\r\n      />\r\n      {/* <AiOutlineSearch /> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SearchBar;\r\n","import { Link } from 'react-router-dom';\r\nimport AuthButton from './AuthButton';\r\nimport SearchBar from './SearchBar';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nfunction Header({ searchedTitle, handleChange, isAdmin }) {\r\n  let location = useLocation();\r\n\r\n  return (\r\n    <header className=\"page-header\">\r\n      <ul className=\"nav\">\r\n        <li>\r\n          <Link to=\"/\" className=\"grid-item\">\r\n            Домой\r\n          </Link>\r\n        </li>\r\n        <li>\r\n          <Link to=\"/new-article\"> Новая статья </Link>\r\n        </li>\r\n        {isAdmin && (\r\n          <li>\r\n            <Link to=\"/new-category\"> Новая категория </Link>\r\n          </li>\r\n        )}\r\n        <li style={{ float: 'right', marginRight: '50px' }}>\r\n          <AuthButton />\r\n        </li>\r\n        {(location.pathname === '/' ||\r\n          location.pathname.match(/\\/category\\/.+$/) !== null) && (\r\n          <li>\r\n            <SearchBar\r\n              searchedTitle={searchedTitle}\r\n              handleChange={handleChange}\r\n            />\r\n          </li>\r\n        )}\r\n      </ul>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React, { Suspense, useState } from 'react';\r\nimport { Link, useParams, Redirect } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport { AiFillCloseCircle, AiFillEdit } from 'react-icons/ai';\r\nimport axios from 'axios';\r\nimport { useAuth0 } from '@auth0/auth0-react';\r\nconst ArticleImg = React.lazy(() => import('./ArticleImg'));\r\n\r\nconst Article = ({\r\n  id,\r\n  title,\r\n  author,\r\n  date,\r\n  description,\r\n  imgURL,\r\n  isAdmin,\r\n  onNewArticle,\r\n  categories,\r\n  accessToken,\r\n}) => {\r\n  const { category } = useParams();\r\n  const { user, isLoading } = useAuth0();\r\n  const [edit, setEdit] = useState(false);\r\n\r\n  const success = (message) => {\r\n    toast.success(message, {\r\n      position: 'top-right',\r\n      autoClose: 5000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n    });\r\n  };\r\n\r\n  const error = (message) => {\r\n    toast.error(message, {\r\n      position: 'top-right',\r\n      autoClose: 5000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n    });\r\n  };\r\n\r\n  const monthToString = (month) => {\r\n    switch (month) {\r\n      case 1:\r\n        return 'Января';\r\n      case 2:\r\n        return 'Февраля';\r\n      case 3:\r\n        return 'Марта';\r\n      case 4:\r\n        return 'Апреля';\r\n      case 5:\r\n        return 'Мая';\r\n      case 6:\r\n        return 'Июня';\r\n      case 7:\r\n        return 'Июня';\r\n      case 8:\r\n        return 'Августа';\r\n      case 9:\r\n        return 'Сентября';\r\n      case 10:\r\n        return 'Октября';\r\n      case 11:\r\n        return 'Ноября';\r\n      case 12:\r\n        return 'Декабря';\r\n      default:\r\n        return 'Ошибка';\r\n    }\r\n  };\r\n\r\n  const handleClick = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      await axios.put(\r\n        'http://localhost:5000/api/categories',\r\n        {\r\n          _id: `${\r\n            categories.find(\r\n              (categ) => categ.title === decodeURIComponent(category)\r\n            )._id\r\n          }`,\r\n          articles: [\r\n            ...categories\r\n              .find((categ) => categ.title === decodeURIComponent(category))\r\n              .articles.filter((article) => article._id !== id),\r\n          ],\r\n          action: 'edit',\r\n          accessToken: `${accessToken}`,\r\n          articleId: `${id}`,\r\n        },\r\n        { headers: { authorization: `Bearer ${accessToken}` } }\r\n      );\r\n      await axios.delete('http://localhost:5000/api/articles', {\r\n        data: {\r\n          _id: `${id}`,\r\n        },\r\n        headers: { authorization: `Bearer ${accessToken}` },\r\n      });\r\n    } catch (err) {\r\n      error(`Ошибка удаления статьи\\n${err}`);\r\n      return;\r\n    }\r\n\r\n    success('Статья успешно удалена');\r\n    onNewArticle();\r\n  };\r\n\r\n  return (\r\n    <Link to={`/category/${category}/article/${id}`} className=\"article-home\">\r\n      {edit && <Redirect to={`/category/${category}/article/${id}/edit`} />}\r\n      {(isAdmin ||\r\n        (!isLoading && user !== undefined && author === user.nickname)) && (\r\n        <AiFillCloseCircle className=\"delete-btn\" onClick={handleClick} />\r\n      )}\r\n      {(isAdmin ||\r\n        (!isLoading && user !== undefined && author === user.nickname)) && (\r\n        <AiFillEdit\r\n          className=\"edit-btn-article\"\r\n          onClick={(e) => {\r\n            e.preventDefault();\r\n            setEdit(true);\r\n          }}\r\n        />\r\n      )}\r\n      <Suspense fallback={<div className=\"img-fallback\">Загрузка...</div>}>\r\n        <ArticleImg imgURL={imgURL} />\r\n      </Suspense>\r\n      {date.getDate()} {monthToString(date.getMonth() + 1)} {date.getFullYear()}\r\n      <small className=\"article-home-author\">автор: {author}</small>\r\n      <h2 className=\"article-home-title\">{title}</h2>\r\n      <br />\r\n      {description}\r\n      <br />\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport default Article;\r\n","import { useEffect } from 'react';\r\nimport { useParams } from 'react-router';\r\nimport Article from './Article';\r\nimport Loader from 'react-loader-spinner';\r\n\r\nfunction Articles({\r\n  categories,\r\n  searchedTitle,\r\n  fetching,\r\n  displayError,\r\n  error,\r\n  isAdmin,\r\n  onNewArticle,\r\n  accessToken,\r\n}) {\r\n  const { category } = useParams();\r\n\r\n  useEffect(() => {\r\n    if (displayError) {\r\n      error('Ошибка при подключении к базе данных');\r\n    }\r\n  }, [error, displayError]);\r\n\r\n  const categoryArticles =\r\n    categories.length === 0\r\n      ? []\r\n      : categories.find(\r\n          (categ) => categ.title === decodeURIComponent(category)\r\n        );\r\n\r\n  const filteredArticles =\r\n    categoryArticles === undefined || categoryArticles.length === 0\r\n      ? []\r\n      : categoryArticles.articles.filter((article) =>\r\n          article.title.toLowerCase().startsWith(searchedTitle.toLowerCase())\r\n        );\r\n\r\n  return (\r\n    <div className={'articles'}>\r\n      {filteredArticles.length !== 0\r\n        ? filteredArticles.map((article) => (\r\n            <Article\r\n              key={article._id}\r\n              id={article._id}\r\n              title={article.title}\r\n              date={new Date(article.date)}\r\n              description={article.description}\r\n              author={article.author}\r\n              imgURL={article.imgURL}\r\n              isAdmin={isAdmin}\r\n              onNewArticle={onNewArticle}\r\n              categories={categories}\r\n              accessToken={accessToken}\r\n            />\r\n          ))\r\n        : !fetching && (\r\n            <h1 style={{ color: 'rgb(175,0,0)' }}>Статей не найдено</h1>\r\n          )}\r\n      {fetching && (\r\n        <Loader\r\n          type=\"TailSpin\"\r\n          color=\"rgb(175,0,0)\"\r\n          height={100}\r\n          width={100}\r\n          style={{\r\n            top: '50%',\r\n            left: '50%',\r\n            transform: 'translate(-50%, -50%)',\r\n            position: 'absolute',\r\n            zIndex: '2',\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Articles;\r\n","function NoMatch() {\r\n  return <h1 className=\"page-404\">404 Страница не найдена</h1>;\r\n}\r\n\r\nexport default NoMatch;\r\n","function Comment({ comment }) {\r\n  const calculateTimePosted = (date) => {\r\n    const datePosted = new Date(date);\r\n    const timePassedMs = Math.abs(datePosted.getTime() - Date.now());\r\n\r\n    if (Math.floor(timePassedMs / (3.154 * Math.pow(10, 10))) === 0) {\r\n      if (Math.floor(timePassedMs / (2.628 * Math.pow(10, 9))) === 0) {\r\n        if (Math.floor(timePassedMs / (8.64 * Math.pow(10, 7))) === 0) {\r\n          if (Math.floor(timePassedMs / (3.6 * Math.pow(10, 6))) === 0) {\r\n            if (Math.floor(timePassedMs / 60000) === 0) {\r\n              if (Math.round(timePassedMs / 1000) === 1) {\r\n                return `${Math.round(timePassedMs / 1000)} секунду`;\r\n              } else if (\r\n                Math.round(timePassedMs / 1000) >= 2 &&\r\n                Math.round(timePassedMs / 1000) <= 4\r\n              ) {\r\n                return `${Math.round(timePassedMs / 1000)} секунды`;\r\n              } else {\r\n                return `${Math.round(timePassedMs / 1000)} секунд`;\r\n              }\r\n            } else if (Math.floor(timePassedMs / 60000) === 1) {\r\n              return `${Math.floor(timePassedMs / 60000)} минуту`;\r\n            } else if (\r\n              Math.floor(timePassedMs / 60000) >= 2 &&\r\n              Math.floor(timePassedMs / 60000) <= 4\r\n            ) {\r\n              return `${Math.floor(timePassedMs / 60000)} минуты`;\r\n            } else {\r\n              return `${Math.floor(timePassedMs / 60000)} минут`;\r\n            }\r\n          } else if (Math.floor(timePassedMs / (3.6 * Math.pow(10, 6))) === 1) {\r\n            return `${Math.floor(timePassedMs / (3.6 * Math.pow(10, 6)))} час`;\r\n          } else if (\r\n            Math.floor(timePassedMs / (3.6 * Math.pow(10, 6))) >= 2 &&\r\n            Math.floor(timePassedMs / (3.6 * Math.pow(10, 6))) <= 4\r\n          ) {\r\n            return `${Math.floor(timePassedMs / (3.6 * Math.pow(10, 6)))} часа`;\r\n          } else {\r\n            return `${Math.floor(\r\n              timePassedMs / (3.6 * Math.pow(10, 6))\r\n            )} часов`;\r\n          }\r\n        } else if (Math.floor(timePassedMs / (8.64 * Math.pow(10, 7))) === 1) {\r\n          return `${Math.floor(timePassedMs / (8.64 * Math.pow(10, 7)))} день`;\r\n        } else if (\r\n          Math.floor(timePassedMs / (8.64 * Math.pow(10, 7))) >= 2 &&\r\n          Math.floor(timePassedMs / (8.64 * Math.pow(10, 7))) <= 4\r\n        ) {\r\n          return `${Math.floor(timePassedMs / (8.64 * Math.pow(10, 7)))} дня`;\r\n        } else {\r\n          return `${Math.floor(timePassedMs / (8.64 * Math.pow(10, 7)))} дней`;\r\n        }\r\n      } else if (Math.floor(timePassedMs / (2.628 * Math.pow(10, 9))) === 1) {\r\n        return `${Math.floor(timePassedMs / (2.628 * Math.pow(10, 9)))} месяц`;\r\n      } else if (\r\n        Math.floor(timePassedMs / (2.628 * Math.pow(10, 9))) >= 2 &&\r\n        Math.floor(timePassedMs / (2.628 * Math.pow(10, 9))) <= 4\r\n      ) {\r\n        return `${Math.floor(timePassedMs / (2.628 * Math.pow(10, 9)))} месяца`;\r\n      } else {\r\n        return `${Math.floor(\r\n          timePassedMs / (2.628 * Math.pow(10, 9))\r\n        )} месяцов`;\r\n      }\r\n    } else if (Math.floor(timePassedMs / (3.154 * Math.pow(10, 10))) === 1) {\r\n      return `${Math.floor(timePassedMs / (3.154 * Math.pow(10, 10)))} год`;\r\n    } else if (\r\n      Math.floor(timePassedMs / (3.154 * Math.pow(10, 10))) >= 2 &&\r\n      Math.floor(timePassedMs / (3.154 * Math.pow(10, 10))) <= 4\r\n    ) {\r\n      return `${Math.floor(timePassedMs / (3.154 * Math.pow(10, 10)))} года`;\r\n    } else {\r\n      return `${Math.floor(timePassedMs / (3.154 * Math.pow(10, 10)))} лет`;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"article-comment\">\r\n      <small>\r\n        {comment.author}\r\n        <span style={{ float: 'right' }}>\r\n          {calculateTimePosted(comment.date) + ' назад'}\r\n        </span>{' '}\r\n      </small>\r\n      <p style={{ marginTop: '10px' }}>{comment.body}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Comment;\r\n","import Comment from './Comment';\r\n\r\nfunction Comments({ comments }) {\r\n  const reversedComments = [...comments];\r\n\r\n  return (\r\n    <div className=\"comments\">\r\n      {reversedComments\r\n        .reverse()\r\n        .filter((comment) => comment.body !== undefined)\r\n        .map((comment) => (\r\n          <Comment key={comment._id} comment={comment} />\r\n        ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Comments;\r\n","import { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useAuth0 } from '@auth0/auth0-react';\r\nimport { Redirect, useParams } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.min.css';\r\n\r\nfunction NewComment({ comments, onNewComment, accessToken }) {\r\n  const { user, isAuthenticated } = useAuth0();\r\n  const { id } = useParams();\r\n  const [body, setBody] = useState('');\r\n  const [redirectLogin, setRedirectLogin] = useState(false);\r\n\r\n  const success = (message) => {\r\n    toast.success(message, {\r\n      position: 'top-right',\r\n      autoClose: 5000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n    });\r\n  };\r\n\r\n  const error = (message) => {\r\n    toast.error(message, {\r\n      position: 'top-right',\r\n      autoClose: 5000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n    });\r\n  };\r\n\r\n  const handleClick = async () => {\r\n    if (!isAuthenticated) {\r\n      setRedirectLogin(true);\r\n    } else {\r\n      try {\r\n        await axios.put(\r\n          'http://localhost:5000/api/articles/comments',\r\n          {\r\n            _id: `${id}`,\r\n            comments: [\r\n              ...comments,\r\n              {\r\n                body: `${body}`,\r\n                date: `${Date.now()}`,\r\n                author: `${user.nickname}`,\r\n              },\r\n            ],\r\n          },\r\n          { headers: { authorization: `Bearer ${accessToken}` } }\r\n        );\r\n      } catch (err) {\r\n        error(err + ' Ошибка добавления комментария...');\r\n        return;\r\n      }\r\n      onNewComment(body, user.nickname);\r\n      success(`Комментарий успешно добавлен`);\r\n      setBody('');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ textAlign: 'center' }}>\r\n      {redirectLogin && <Redirect to=\"/login\" />}\r\n      <textarea\r\n        style={{\r\n          width: '100% ',\r\n          height: '10vh',\r\n          borderRadius: '5px',\r\n          resize: 'none',\r\n        }}\r\n        value={body}\r\n        onChange={(e) => {\r\n          setBody(e.target.value);\r\n        }}\r\n      />\r\n      <button className=\"btn\" style={{ width: '40vw' }} onClick={handleClick}>\r\n        Выложить\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NewComment;\r\n","import { useState, useEffect, useMemo } from 'react';\r\nimport { Link, useParams, useLocation } from 'react-router-dom';\r\nimport { AiFillEdit } from 'react-icons/ai';\r\nimport { BsFillTrashFill } from 'react-icons/bs';\r\nimport { toast } from 'react-toastify';\r\nimport ReactHtmlParser from 'react-html-parser';\r\nimport Loader from 'react-loader-spinner';\r\nimport NoMatch from './NoMatch';\r\nimport Prism from 'prismjs';\r\nimport '../../prism.css';\r\nimport 'prismjs/components/prism-markup-templating';\r\nimport 'prismjs/components/prism-php';\r\nimport 'prismjs/components/prism-csharp';\r\nimport 'prismjs/components/prism-c';\r\nimport 'prismjs/components/prism-clike';\r\nimport 'prismjs/components/prism-java';\r\nimport Comments from '../Comments';\r\nimport { useAuth0 } from '@auth0/auth0-react';\r\nimport NewComment from '../NewComment';\r\nimport mongoose from 'mongoose';\r\nimport axios from 'axios';\r\n\r\nfunction ArticlePage({\r\n  categories,\r\n  fetching,\r\n  onNewArticle,\r\n  isAdmin,\r\n  accessToken,\r\n}) {\r\n  let { category, id } = useParams();\r\n  const [comments, setComments] = useState([]);\r\n\r\n  const { user, isLoading } = useAuth0(0);\r\n\r\n  let location = useLocation();\r\n\r\n  const success = (message) => {\r\n    toast.success(message, {\r\n      position: 'top-right',\r\n      autoClose: 5000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n    });\r\n  };\r\n\r\n  const error = (message) => {\r\n    toast.error(message, {\r\n      position: 'top-right',\r\n      autoClose: 5000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n    });\r\n  };\r\n\r\n  const currCategory = useMemo(\r\n    () =>\r\n      categories.length === 0\r\n        ? { comments: [] }\r\n        : categories.find(\r\n            (categ) => categ.title === decodeURIComponent(category)\r\n          ),\r\n    [categories, category]\r\n  );\r\n\r\n  const article =\r\n    currCategory === undefined || currCategory.articles === undefined\r\n      ? undefined\r\n      : currCategory.articles.find((article) => article._id === id);\r\n\r\n  const calculateTimePosted = (date) => {\r\n    const datePosted = new Date(date);\r\n    const timePassedMs = Math.abs(datePosted.getTime() - Date.now());\r\n\r\n    if (Math.floor(timePassedMs / (3.154 * Math.pow(10, 10))) === 0) {\r\n      if (Math.floor(timePassedMs / (2.628 * Math.pow(10, 9))) === 0) {\r\n        if (Math.floor(timePassedMs / (8.64 * Math.pow(10, 7))) === 0) {\r\n          if (Math.floor(timePassedMs / (3.6 * Math.pow(10, 6))) === 0) {\r\n            if (Math.floor(timePassedMs / 60000) === 0) {\r\n              if (Math.round(timePassedMs / 1000) === 1) {\r\n                return `${Math.round(timePassedMs / 1000)} секунду`;\r\n              } else if (\r\n                Math.round(timePassedMs / 1000) >= 2 &&\r\n                Math.round(timePassedMs / 1000) <= 4\r\n              ) {\r\n                return `${Math.round(timePassedMs / 1000)} секунды`;\r\n              } else {\r\n                return `${Math.round(timePassedMs / 1000)} секунд`;\r\n              }\r\n            } else if (Math.floor(timePassedMs / 60000) === 1) {\r\n              return `${Math.floor(timePassedMs / 60000)} минуту`;\r\n            } else if (\r\n              Math.floor(timePassedMs / 60000) >= 2 &&\r\n              Math.floor(timePassedMs / 60000) <= 4\r\n            ) {\r\n              return `${Math.floor(timePassedMs / 60000)} минуты`;\r\n            } else {\r\n              return `${Math.floor(timePassedMs / 60000)} минут`;\r\n            }\r\n          } else if (Math.floor(timePassedMs / (3.6 * Math.pow(10, 6))) === 1) {\r\n            return `${Math.floor(timePassedMs / (3.6 * Math.pow(10, 6)))} час`;\r\n          } else if (\r\n            Math.floor(timePassedMs / (3.6 * Math.pow(10, 6))) >= 2 &&\r\n            Math.floor(timePassedMs / (3.6 * Math.pow(10, 6))) <= 4\r\n          ) {\r\n            return `${Math.floor(timePassedMs / (3.6 * Math.pow(10, 6)))} часа`;\r\n          } else {\r\n            return `${Math.floor(\r\n              timePassedMs / (3.6 * Math.pow(10, 6))\r\n            )} часов`;\r\n          }\r\n        } else if (Math.floor(timePassedMs / (8.64 * Math.pow(10, 7))) === 1) {\r\n          return `${Math.floor(timePassedMs / (8.64 * Math.pow(10, 7)))} день`;\r\n        } else if (\r\n          Math.floor(timePassedMs / (8.64 * Math.pow(10, 7))) >= 2 &&\r\n          Math.floor(timePassedMs / (8.64 * Math.pow(10, 7))) <= 4\r\n        ) {\r\n          return `${Math.floor(timePassedMs / (8.64 * Math.pow(10, 7)))} дня`;\r\n        } else {\r\n          return `${Math.floor(timePassedMs / (8.64 * Math.pow(10, 7)))} дней`;\r\n        }\r\n      } else if (Math.floor(timePassedMs / (2.628 * Math.pow(10, 9))) === 1) {\r\n        return `${Math.floor(timePassedMs / (2.628 * Math.pow(10, 9)))} месяц`;\r\n      } else if (\r\n        Math.floor(timePassedMs / (2.628 * Math.pow(10, 9))) >= 2 &&\r\n        Math.floor(timePassedMs / (2.628 * Math.pow(10, 9))) <= 4\r\n      ) {\r\n        return `${Math.floor(timePassedMs / (2.628 * Math.pow(10, 9)))} месяца`;\r\n      } else {\r\n        return `${Math.floor(\r\n          timePassedMs / (2.628 * Math.pow(10, 9))\r\n        )} месяцов`;\r\n      }\r\n    } else if (Math.floor(timePassedMs / (3.154 * Math.pow(10, 10))) === 1) {\r\n      return `${Math.floor(timePassedMs / (3.154 * Math.pow(10, 10)))} год`;\r\n    } else if (\r\n      Math.floor(timePassedMs / (3.154 * Math.pow(10, 10))) >= 2 &&\r\n      Math.floor(timePassedMs / (3.154 * Math.pow(10, 10))) <= 4\r\n    ) {\r\n      return `${Math.floor(timePassedMs / (3.154 * Math.pow(10, 10)))} года`;\r\n    } else {\r\n      return `${Math.floor(timePassedMs / (3.154 * Math.pow(10, 10)))} лет`;\r\n    }\r\n  };\r\n\r\n  const handleClick = async () => {\r\n    try {\r\n      await axios.put(\r\n        'http://localhost:5000/api/categories',\r\n        {\r\n          _id: `${\r\n            categories.find(\r\n              (categ) => categ.title === decodeURIComponent(category)\r\n            )._id\r\n          }`,\r\n          articles: [\r\n            ...categories\r\n              .find((categ) => categ.title === decodeURIComponent(category))\r\n              .articles.filter((article) => article._id !== id),\r\n          ],\r\n          action: 'edit',\r\n          accessToken: `${accessToken}`,\r\n          articleId: `${id}`,\r\n        },\r\n        { headers: { authorization: `Bearer ${accessToken}` } }\r\n      );\r\n      await axios.delete('http://localhost:5000/api/articles', {\r\n        data: {\r\n          _id: `${id}`,\r\n        },\r\n        headers: { authorization: `Bearer ${accessToken}` },\r\n      });\r\n    } catch (err) {\r\n      error(`Ошибка удаления статьи\\n${err}`);\r\n      return;\r\n    }\r\n\r\n    success('Статья успешно удалена');\r\n    onNewArticle();\r\n  };\r\n\r\n  useEffect(() => {\r\n    Prism.highlightAll();\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (article !== undefined) {\r\n      setComments(article.comments);\r\n    }\r\n  }, [fetching, article]);\r\n\r\n  const onNewComment = (body, nickname) => {\r\n    setComments([\r\n      ...comments,\r\n      {\r\n        _id: mongoose.Types.ObjectId(),\r\n        body: `${body}`,\r\n        date: `${new Date(Date.now())}`,\r\n        author: `${nickname}`,\r\n      },\r\n    ]);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {article === undefined || article.body === undefined ? (\r\n        (!fetching && <NoMatch />) ||\r\n        (fetching && (\r\n          <Loader\r\n            type=\"TailSpin\"\r\n            color=\"rgb(175,0,0)\"\r\n            height={100}\r\n            width={100}\r\n            style={{\r\n              top: '50%',\r\n              left: '50%',\r\n              transform: 'translate(-50%, -50%)',\r\n              position: 'absolute',\r\n              zIndex: '2',\r\n            }}\r\n          />\r\n        ))\r\n      ) : (\r\n        <div className=\"article \">\r\n          <h1 className=\"article-title\">{article.title}</h1> <br /> <br />\r\n          <p>{article.description}</p>\r\n          <small>\r\n            выложено {calculateTimePosted(article.date)} назад автор{' '}\r\n            {article.author}\r\n          </small>\r\n          {(isAdmin ||\r\n            (!isLoading &&\r\n              user !== undefined &&\r\n              article.author === user.nickname)) && (\r\n            <Link to={`${location.pathname}/edit`} className=\"edit-btn\">\r\n              Редактировать\r\n              <AiFillEdit />\r\n            </Link>\r\n          )}\r\n          {(isAdmin ||\r\n            (!isLoading &&\r\n              user !== undefined &&\r\n              article.author === user.nickname)) && (\r\n            <Link\r\n              to={`..`}\r\n              className=\"edit-btn\"\r\n              style={{ marginRight: '10px' }}\r\n              onClick={handleClick}\r\n            >\r\n              Удалить\r\n              <BsFillTrashFill />\r\n            </Link>\r\n          )}\r\n          <div className=\"article-body\">{ReactHtmlParser(article.body)}</div>\r\n          <h1>Комменатрии:</h1>\r\n          <NewComment\r\n            comments={comments}\r\n            onNewComment={onNewComment}\r\n            accessToken={accessToken}\r\n          />\r\n          {comments.length > 0 && <Comments comments={comments} />}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ArticlePage;\r\n","import { useAuth0 } from '@auth0/auth0-react';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nfunction LoginPage() {\r\n  const { loginWithRedirect, isAuthenticated } = useAuth0();\r\n\r\n  if (!isAuthenticated) {\r\n    loginWithRedirect();\r\n  } else {\r\n    <Redirect to=\"/\" />;\r\n  }\r\n  return <div>{}</div>;\r\n}\r\n\r\nexport default LoginPage;\r\n","import { Editor } from '@tinymce/tinymce-react';\r\nimport { useState } from 'react';\r\nimport Loader from 'react-loader-spinner';\r\nimport { useParams } from 'react-router-dom';\r\nimport { toast, ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.min.css';\r\nimport axios from 'axios';\r\nimport { Redirect } from 'react-router-dom';\r\nimport mongoose from 'mongoose';\r\n\r\nfunction EditorPage({\r\n  categories,\r\n  initValue,\r\n  onNewArticle,\r\n  method,\r\n  accessToken,\r\n}) {\r\n  const [body, setBody] = useState(initValue);\r\n  const [returnHome, setReturnHome] = useState(false);\r\n  const [posting, setPosting] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  let { title, description, imgURL, categor, category, id } = useParams();\r\n  description === undefined && (description = null);\r\n  imgURL === undefined && (imgURL = null);\r\n\r\n  const articleId = mongoose.Types.ObjectId();\r\n\r\n  const success = (message) => {\r\n    toast.success(message, {\r\n      position: 'top-right',\r\n      autoClose: 5000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n    });\r\n  };\r\n\r\n  const error = (message) => {\r\n    toast.error(message, {\r\n      position: 'top-right',\r\n      autoClose: 5000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n    });\r\n  };\r\n\r\n  const handleClick = async () => {\r\n    const newArticle = {\r\n      title: `${decodeURIComponent(title)}`,\r\n      description: `${decodeURIComponent(description)}`,\r\n      body: `${body}`,\r\n      date: `${Date.now()}`,\r\n      imgURL: `${imgURL}`,\r\n      hidden: 'false',\r\n    };\r\n\r\n    try {\r\n      setPosting(true);\r\n      if (\r\n        categories.find(\r\n          (categ) => categ.title === decodeURIComponent(categor)\r\n        ) === undefined\r\n      ) {\r\n        throw Error('Неверное значение категории');\r\n      }\r\n\r\n      if (method === 'post') {\r\n        await axios.post(\r\n          'http://localhost:5000/api/articles',\r\n          {\r\n            ...newArticle,\r\n            _id: `${articleId}`,\r\n            accessToken: `${accessToken}`,\r\n            comments: [],\r\n          },\r\n          { headers: { authorization: `Bearer ${accessToken}` } }\r\n        );\r\n        await axios.put(\r\n          'http://localhost:5000/api/categories',\r\n          {\r\n            _id: `${\r\n              categories.find(\r\n                (categ) => categ.title === decodeURIComponent(categor)\r\n              )._id\r\n            }`,\r\n            articles: [\r\n              ...categories.find(\r\n                (categ) => categ.title === decodeURIComponent(categor)\r\n              ).articles,\r\n              `${articleId}`,\r\n            ],\r\n          },\r\n          { headers: { authorization: `Bearer ${accessToken}` } }\r\n        );\r\n      } else if (method === 'put') {\r\n        await axios.put(\r\n          'http://localhost:5000/api/articles',\r\n          {\r\n            ...newArticle,\r\n            _id: `${id}`,\r\n          },\r\n          { headers: { authorization: `Bearer ${accessToken}` } }\r\n        );\r\n        if (category !== categor) {\r\n          await axios.put(\r\n            'http://localhost:5000/api/categories',\r\n            {\r\n              _id: `${\r\n                categories.find(\r\n                  (categ) => categ.title === decodeURIComponent(category)\r\n                )._id\r\n              }`,\r\n              articles: [\r\n                ...categories\r\n                  .find((categ) => categ.title === decodeURIComponent(category))\r\n                  .articles.filter((article) => article._id !== id),\r\n              ],\r\n              articleId: `${id}`,\r\n              action: 'edit',\r\n            },\r\n            { headers: { authorization: `Bearer ${accessToken}` } }\r\n          );\r\n          await axios.put(\r\n            'http://localhost:5000/api/categories',\r\n            {\r\n              _id: `${\r\n                categories.find(\r\n                  (categ) => categ.title === decodeURIComponent(categor)\r\n                )._id\r\n              }`,\r\n              articles: [\r\n                ...categories.find(\r\n                  (categ) => categ.title === decodeURIComponent(categor)\r\n                ).articles,\r\n                `${id}`,\r\n              ],\r\n            },\r\n            { headers: { authorization: `Bearer ${accessToken}` } }\r\n          );\r\n        }\r\n      }\r\n      setPosting(false);\r\n    } catch (err) {\r\n      error(\r\n        err +\r\n          ' Ошибка добавления статьи в базу данных. Возвращение на домашюю страницу...'\r\n      );\r\n      setReturnHome(true);\r\n      return;\r\n    }\r\n    onNewArticle();\r\n    success(`Статья '${decodeURIComponent(title)}' успешно загружена`);\r\n    setReturnHome(true);\r\n  };\r\n\r\n  return (\r\n    <div className=\"editor\">\r\n      <ToastContainer />\r\n      {(loading || posting) && (\r\n        <Loader\r\n          type=\"TailSpin\"\r\n          color=\"rgb(175,0,0)\"\r\n          height={100}\r\n          width={100}\r\n          style={{\r\n            top: '50%',\r\n            left: '50%',\r\n            transform: 'translate(-50%, -50%)',\r\n            position: 'absolute',\r\n            zIndex: '2',\r\n          }}\r\n        />\r\n      )}\r\n      {returnHome && (\r\n        <Redirect to={{ pathname: '/', state: { errorConnecting: false } }} />\r\n      )}\r\n      <Editor\r\n        initialValue={body}\r\n        apiKey={process.env.REACT_APP_TINYMCE_API_KEY}\r\n        init={{\r\n          height: '88vh',\r\n          width: '71vw',\r\n          content_style: 'body {color: rgb(175, 0, 0);}',\r\n          setMode: 'readonly',\r\n          language: 'ru',\r\n          menubar: 'insert | edit | format | view',\r\n          plugins:\r\n            'advlist autolink lists link image charmap print preview anchor ' +\r\n            'searchreplace visualblocks code fullscreen ' +\r\n            'insertdatetime media table paste code help wordcount toc codesample',\r\n          toolbar:\r\n            'undo redo | formatselect | bold italic backcolor | ' +\r\n            'alignleft aligncenter alignright alignjustify | ' +\r\n            'bullist numlist outdent indent | removeformat | help | codesample code | toc',\r\n        }}\r\n        onEditorChange={(content) => setBody(content)}\r\n        onInit={() => {\r\n          setLoading(false);\r\n        }}\r\n      />\r\n      <button\r\n        className={`btn ${loading ? 'hidden' : ''}`}\r\n        onClick={handleClick}\r\n      >\r\n        Выложить\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EditorPage;\r\n","import { useState } from 'react';\r\nimport { createBrowserHistory } from 'history';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nfunction ArticleForm({\r\n  categories,\r\n  initTitle = 'Новая статья',\r\n  initDescription = '',\r\n  initImgURL = '',\r\n  initCategory = categories.length !== 0 ? categories[0].title : '',\r\n}) {\r\n  const [title, setTitle] = useState(initTitle);\r\n  const [description, setDescription] = useState(initDescription);\r\n  const [imgURL, setImgURL] = useState(initImgURL);\r\n  const [category, setCategory] = useState(initCategory);\r\n\r\n  const history = createBrowserHistory();\r\n  const location = useLocation();\r\n\r\n  let textAreaStyle;\r\n  const errorStyle = { borderColor: 'red', backgroundColor: '#ffcccb' };\r\n  const successStyle = { borderColor: 'green', backgroundColor: 'lightgreen' };\r\n\r\n  return (\r\n    <form\r\n      className=\"new-article-form\"\r\n      onSubmit={() => {\r\n        history.push(\r\n          `${location.pathname}/title=${encodeURIComponent(\r\n            title\r\n          )}/description=${encodeURIComponent(\r\n            description\r\n          )}/imgURL=${encodeURIComponent(imgURL)}/category=${encodeURIComponent(\r\n            category\r\n          )}`\r\n        );\r\n      }}\r\n    >\r\n      Введите название статьи:\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Введите название(5-60 символов)\"\r\n        style={{ borderRadius: '5px' }}\r\n        defaultValue={initTitle}\r\n        required\r\n        minLength=\"5\"\r\n        maxLength=\"60\"\r\n        onChange={(e) => {\r\n          setTitle(e.target.value);\r\n        }}\r\n      />\r\n      <span style={{ marginTop: '10px' }}>Введите описание:</span>\r\n      <textarea\r\n        placeholder=\"Введите описание(1-70 символов)\"\r\n        required\r\n        maxLength=\"70\"\r\n        value={description}\r\n        style={textAreaStyle}\r\n        onChange={(e) => {\r\n          setDescription(e.target.value);\r\n          if (e.target.value.length < 5 || e.target.value > 60) {\r\n            textAreaStyle = errorStyle;\r\n          } else {\r\n            textAreaStyle = successStyle;\r\n          }\r\n        }}\r\n      />\r\n      <span style={{ marginTop: '10px' }}>\r\n        Введите URL картинки для заднего фона:\r\n      </span>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Введите URL\"\r\n        style={{ borderRadius: '5px' }}\r\n        value={imgURL}\r\n        required\r\n        pattern=\".+\\.(jpeg|jpg|gif|png)$\"\r\n        onChange={(e) => {\r\n          setImgURL(e.target.value);\r\n        }}\r\n      />\r\n      {categories.length !== 0 && (\r\n        <span style={{ marginTop: '10px' }}>Выберите категорию:</span>\r\n      )}\r\n      {categories.length !== 0 && (\r\n        <select\r\n          required\r\n          value={category}\r\n          onChange={(e) => setCategory(e.target.value)}\r\n        >\r\n          {categories.map((categ) => (\r\n            <option key={categ._id} value={categ.title}>\r\n              {categ.title}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      )}\r\n      <input\r\n        type=\"submit\"\r\n        value=\"Далее\"\r\n        className=\"btn\"\r\n        style={{ marginTop: '20px' }}\r\n      />\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default ArticleForm;\r\n","import { Route, useRouteMatch } from 'react-router-dom';\r\nimport EditorPage from './EditorPage';\r\nimport ArticleForm from '../ArticleForm';\r\nimport { withAuthenticationRequired } from '@auth0/auth0-react';\r\n\r\nfunction NewArticlePage({ categories, onNewArticle, isAdmin, accessToken }) {\r\n  let { path } = useRouteMatch();\r\n\r\n  return (\r\n    <>\r\n      <Route\r\n        exact\r\n        path={`${path}`}\r\n        render={(props) => <ArticleForm categories={categories} />}\r\n      />\r\n      <Route\r\n        path={`${path}/title=:title/description=:description/imgURL=:imgURL/category=:categor`}\r\n        render={(props) => (\r\n          <EditorPage\r\n            categories={categories}\r\n            initValue=\"Новая статья\"\r\n            onNewArticle={onNewArticle}\r\n            method=\"post\"\r\n            isAdmin={isAdmin}\r\n            accessToken={accessToken}\r\n          />\r\n        )}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default withAuthenticationRequired(NewArticlePage);\r\n","import React from 'react';\r\nimport { BsXCircle } from 'react-icons/bs';\r\n\r\nfunction VerifyEmail({ handleClick }) {\r\n  return (\r\n    <div className=\"verify-email\">\r\n      <BsXCircle style={{ visibility: 'hidden' }} /> Ваш e-mail не подтвержден!\r\n      <BsXCircle style={{ cursor: 'pointer' }} onClick={handleClick} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default VerifyEmail;\r\n","import React, { Suspense, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { AiFillCloseCircle, AiFillEdit } from 'react-icons/ai';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport axios from 'axios';\r\nconst ArticleImg = React.lazy(() => import('./ArticleImg'));\r\n\r\nconst Category = ({\r\n  title,\r\n  description,\r\n  imgURL,\r\n  onNewArticle,\r\n  isAdmin,\r\n  accessToken,\r\n}) => {\r\n  const [edit, setEdit] = useState(false);\r\n\r\n  const success = (message) => {\r\n    toast.success(message, {\r\n      position: 'top-right',\r\n      autoClose: 5000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n    });\r\n  };\r\n\r\n  const error = (message) => {\r\n    toast.error(message, {\r\n      position: 'top-right',\r\n      autoClose: 5000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n    });\r\n  };\r\n\r\n  const handleClick = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      await axios.delete('http://localhost:5000/api/categories', {\r\n        data: { title: `${title}` },\r\n        headers: { authorization: `Bearer ${accessToken}` },\r\n      });\r\n    } catch (err) {\r\n      error(`Ошибка удаления категории\\n${err}`);\r\n      return;\r\n    }\r\n\r\n    success('Категория успешно удалена');\r\n    onNewArticle();\r\n  };\r\n\r\n  return (\r\n    <Link\r\n      to={`/category/${encodeURIComponent(title)}`}\r\n      className=\"article-home\"\r\n    >\r\n      {edit && <Redirect to={`/category/${encodeURIComponent(title)}/edit`} />}\r\n      {isAdmin && (\r\n        <AiFillCloseCircle className=\"delete-btn\" onClick={handleClick} />\r\n      )}\r\n      {isAdmin && (\r\n        <AiFillEdit\r\n          className=\"edit-btn-article\"\r\n          onClick={(e) => {\r\n            e.preventDefault();\r\n            setEdit(true);\r\n          }}\r\n        />\r\n      )}\r\n      <Suspense fallback={<div className=\"img-fallback\">Загрузка...</div>}>\r\n        <ArticleImg imgURL={imgURL} />\r\n      </Suspense>\r\n      <h2 className=\"article-home-title\">{title}</h2>\r\n      <br />\r\n      {description}\r\n      <br />\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport default Category;\r\n","import { useEffect } from 'react';\r\nimport Category from './Category';\r\nimport Loader from 'react-loader-spinner';\r\n\r\nfunction Categories({\r\n  categories,\r\n  searchedTitle,\r\n  fetching,\r\n  displayError,\r\n  error,\r\n  accessToken,\r\n  isAdmin,\r\n  onNewArticle,\r\n}) {\r\n  useEffect(() => {\r\n    if (displayError) {\r\n      error('Ошибка при подключении к базе данных');\r\n    }\r\n  }, [error, displayError]);\r\n\r\n  const filteredCategories = categories.filter((category) =>\r\n    category.title.toLowerCase().startsWith(searchedTitle.toLowerCase())\r\n  );\r\n\r\n  return (\r\n    <div className=\"articles\">\r\n      {filteredCategories.length !== 0\r\n        ? filteredCategories.map((category) => (\r\n            <Category\r\n              key={category._id}\r\n              id={category._id}\r\n              title={category.title}\r\n              description={category.description}\r\n              imgURL={category.imgURL}\r\n              accessToken={accessToken}\r\n              isAdmin={isAdmin}\r\n              onNewArticle={onNewArticle}\r\n            />\r\n          ))\r\n        : !fetching && <h1>Категорий не найдено</h1>}\r\n      {fetching && (\r\n        <Loader\r\n          type=\"TailSpin\"\r\n          color=\"rgb(175,0,0)\"\r\n          height={100}\r\n          width={100}\r\n          style={{\r\n            top: '50%',\r\n            left: '50%',\r\n            transform: 'translate(-50%, -50%)',\r\n            position: 'absolute',\r\n            zIndex: '2',\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Categories;\r\n","import { useState } from 'react';\r\nimport { Redirect, useParams } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport { useAuth0 } from '@auth0/auth0-react';\r\nimport Loader from 'react-loader-spinner';\r\nimport axios from 'axios';\r\n\r\nfunction CategoryForm({ onNewArticle, categories, action }) {\r\n  const { category } = useParams();\r\n  const categor =\r\n    category === undefined\r\n      ? null\r\n      : categories.find(\r\n          (categ) => categ.title === decodeURIComponent(category)\r\n        );\r\n\r\n  const [title, setTitle] = useState(\r\n    categor === null ? 'Новая статья' : categor.title\r\n  );\r\n  const [description, setDescription] = useState(\r\n    categor === null ? '' : categor.description\r\n  );\r\n  const [imgURL, setImgURL] = useState(categor === null ? '' : categor.imgURL);\r\n  const [returnHome, setReturnHome] = useState(false);\r\n  const [posting, setPosting] = useState(false);\r\n\r\n  const { getAccessTokenSilently } = useAuth0();\r\n\r\n  let textAreaStyle;\r\n  const errorStyle = { borderColor: 'red', backgroundColor: '#ffcccb' };\r\n  const successStyle = { borderColor: 'green', backgroundColor: 'lightgreen' };\r\n\r\n  const success = (message) => {\r\n    toast.success(message, {\r\n      position: 'top-right',\r\n      autoClose: 5000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n    });\r\n  };\r\n\r\n  const error = (message) => {\r\n    toast.error(message, {\r\n      position: 'top-right',\r\n      autoClose: 5000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const newCategory = {\r\n      title: `${title}`,\r\n      description: `${description}`,\r\n      imgURL: `${imgURL}`,\r\n    };\r\n\r\n    try {\r\n      setPosting(true);\r\n      const accessToken = await getAccessTokenSilently({\r\n        audience: `http://localhost:5000/api`,\r\n        scope: 'read:current_user',\r\n      });\r\n\r\n      if (action === 'post') {\r\n        await axios.post(\r\n          'http://localhost:5000/api/categories',\r\n          { ...newCategory, articles: [] },\r\n          {\r\n            headers: { authorization: `Bearer ${accessToken}` },\r\n          }\r\n        );\r\n      } else if (action === 'put') {\r\n        await axios.put(\r\n          'http://localhost:5000/api/category',\r\n          {\r\n            ...newCategory,\r\n            oldTitle: `${category}`,\r\n            articles: categor.articles,\r\n          },\r\n          {\r\n            headers: { authorization: `Bearer ${accessToken}` },\r\n          }\r\n        );\r\n      }\r\n      setPosting(false);\r\n    } catch (err) {\r\n      error(\r\n        err +\r\n          ' Ошибка добавления категории в базу данных. Возвращение на домашюю страницу...'\r\n      );\r\n      setReturnHome(true);\r\n      return;\r\n    }\r\n    onNewArticle();\r\n    success(`Категория '${decodeURIComponent(title)}' успешно загружена`);\r\n    setReturnHome(true);\r\n  };\r\n\r\n  return (\r\n    <form className=\"new-article-form\" onSubmit={handleSubmit}>\r\n      {returnHome && (\r\n        <Redirect to={{ pathname: '/', state: { errorConnecting: false } }} />\r\n      )}\r\n      {posting && (\r\n        <Loader\r\n          type=\"TailSpin\"\r\n          color=\"rgb(175,0,0)\"\r\n          height={100}\r\n          width={100}\r\n          style={{\r\n            top: '50%',\r\n            left: '50%',\r\n            transform: 'translate(-50%, -50%)',\r\n            position: 'absolute',\r\n            zIndex: '2',\r\n          }}\r\n        />\r\n      )}\r\n      Введите название категории:\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Введите название(1-60 символов)\"\r\n        style={{ borderRadius: '5px' }}\r\n        defaultValue={categor === null ? 'Новая статья' : categor.title}\r\n        required\r\n        minLength=\"1\"\r\n        maxLength=\"60\"\r\n        onChange={(e) => {\r\n          setTitle(e.target.value);\r\n        }}\r\n      />\r\n      <span style={{ marginTop: '10px' }}>Введите описание:</span>\r\n      <textarea\r\n        placeholder=\"Введите описание(1-70 символов)\"\r\n        required\r\n        maxLength=\"70\"\r\n        value={description}\r\n        style={textAreaStyle}\r\n        onChange={(e) => {\r\n          setDescription(e.target.value);\r\n          if (e.target.value.length < 5 || e.target.value > 60) {\r\n            textAreaStyle = errorStyle;\r\n          } else {\r\n            textAreaStyle = successStyle;\r\n          }\r\n        }}\r\n      />\r\n      <span style={{ marginTop: '10px' }}>\r\n        Введите URL картинки для заднего фона:\r\n      </span>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Введите URL\"\r\n        style={{ borderRadius: '5px' }}\r\n        value={imgURL}\r\n        required\r\n        pattern=\".+\\.(jpeg|jpg|gif|png)$\"\r\n        onChange={(e) => {\r\n          setImgURL(e.target.value);\r\n        }}\r\n      />\r\n      <input\r\n        type=\"submit\"\r\n        value=\"Создать\"\r\n        className=\"btn\"\r\n        style={{ marginTop: '20px' }}\r\n      />\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default CategoryForm;\r\n","import { Route, useRouteMatch, useParams } from 'react-router-dom';\r\nimport EditorPage from './EditorPage';\r\nimport ArticleForm from '../ArticleForm';\r\nimport NoMatch from './NoMatch';\r\nimport { withAuthenticationRequired, useAuth0 } from '@auth0/auth0-react';\r\n\r\nfunction EditArticlePage({\r\n  categories,\r\n  onNewArticle,\r\n  fetching,\r\n  isAdmin,\r\n  accessToken,\r\n}) {\r\n  let { path } = useRouteMatch();\r\n  const { category, id } = useParams();\r\n  const { user } = useAuth0();\r\n\r\n  const currentCategory =\r\n    categories.length === 0\r\n      ? []\r\n      : categories.find(\r\n          (categ) => categ.title === decodeURIComponent(category)\r\n        );\r\n\r\n  const currentArticle =\r\n    currentCategory === undefined\r\n      ? { title: '', description: '', category: '', imgURL: '' }\r\n      : currentCategory.articles.find((article) => article._id === id);\r\n\r\n  return (\r\n    <>\r\n      {currentArticle.title === '' ||\r\n      user === undefined ||\r\n      (user.nickname !== currentArticle.author && !isAdmin) ? (\r\n        !fetching && <NoMatch />\r\n      ) : (\r\n        <>\r\n          <Route\r\n            exact\r\n            path={`${path}`}\r\n            render={(props) => (\r\n              <ArticleForm\r\n                categories={categories}\r\n                initTitle={currentArticle.title}\r\n                initDescription={currentArticle.description}\r\n                initCategory={decodeURIComponent(category)}\r\n                initImgURL={currentArticle.imgURL}\r\n              />\r\n            )}\r\n          />\r\n          <Route\r\n            path={`${path}/title=:title/description=:description/imgURL=:imgURL/category=:categor`}\r\n            render={(props) => (\r\n              <EditorPage\r\n                categories={categories}\r\n                initValue={currentArticle.body}\r\n                onNewArticle={onNewArticle}\r\n                method=\"put\"\r\n                isAdmin={isAdmin}\r\n                accessToken={accessToken}\r\n              />\r\n            )}\r\n          />\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default withAuthenticationRequired(EditArticlePage);\r\n","import './App.css';\nimport axios from 'axios';\nimport Header from './components/Header';\nimport { useState, useEffect } from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport { useAuth0 } from '@auth0/auth0-react';\nimport { toast, ToastContainer } from 'react-toastify';\nimport Articles from './components/Articles';\nimport ArticlePage from './components/routes/ArticlePage';\nimport LoginPage from './components/routes/LoginPage';\nimport NewArticlePage from './components/routes/NewArticlePage';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport NoMatch from './components/routes/NoMatch';\nimport VerifyEmail from './components/VerifyEmail';\nimport Categories from './components/Categories';\nimport CategoryForm from './components/CategoryForm';\nimport EditArticlePage from './components/routes/EditArticlePage';\n\nfunction App() {\n  const [categories, setCategories] = useState([]);\n  const [verifyingOpen, setVerifyingOpen] = useState(false);\n  const [fetching, setFetching] = useState(false);\n  const [searchedTitle, setSearchedTitle] = useState('');\n  const [displayError, setDisplayError] = useState(false);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [accessToken, setAccessToken] = useState(null);\n  const {\n    user,\n    isLoading,\n    getAccessTokenSilently,\n    isAuthenticated,\n    loginWithRedirect,\n  } = useAuth0();\n\n  async function fetchData() {\n    try {\n      setFetching(true);\n      setCategories(\n        (await axios.get('http://localhost:5000/api/categories')).data\n      );\n      setFetching(false);\n    } catch {\n      setFetching(false);\n      setDisplayError(true);\n    }\n  }\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const error = (message) => {\n    toast.error(message, {\n      position: 'top-right',\n      autoClose: false,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      onClose: () => setDisplayError(false),\n    });\n  };\n\n  useEffect(() => {\n    user === undefined\n      ? setVerifyingOpen(false)\n      : setVerifyingOpen(!user.email_verified);\n\n    const fetchRole = async () => {\n      const data = (\n        await axios.get(\n          `http://localhost:5000/api/role/${\n            user !== undefined ? user.sub.toString() : ''\n          }`\n        )\n      ).data;\n\n      setIsAdmin(data.role === 'Admin');\n    };\n\n    const fetchToken = async () => {\n      try {\n        setAccessToken(\n          await getAccessTokenSilently({\n            audience: `http://localhost:5000/api`,\n            scope: 'read:current_user',\n          })\n        );\n      } catch {\n        loginWithRedirect();\n      }\n    };\n\n    if (!isLoading) {\n      fetchRole();\n      if (isAuthenticated) {\n        fetchToken();\n      }\n    }\n  }, [\n    user,\n    isLoading,\n    getAccessTokenSilently,\n    isAuthenticated,\n    loginWithRedirect,\n  ]);\n\n  const onNewArticle = () => {\n    fetchData();\n  };\n\n  const handleClick = () => {\n    setVerifyingOpen(false);\n  };\n\n  const handleChange = (e) => {\n    setSearchedTitle(e.target.value);\n  };\n\n  return (\n    <div>\n      <ToastContainer />\n      <Header\n        searchedTitle={searchedTitle}\n        handleChange={handleChange}\n        isAdmin={isAdmin}\n      />\n      {verifyingOpen && <VerifyEmail handleClick={handleClick} />}\n      <Switch>\n        <Route\n          exact\n          path=\"/\"\n          render={(props) => (\n            <Categories\n              categories={categories}\n              searchedTitle={searchedTitle}\n              fetching={fetching}\n              displayError={displayError}\n              error={error}\n              onNewArticle={onNewArticle}\n              isAdmin={isAdmin}\n              accessToken={accessToken}\n            />\n          )}\n        />\n        <Route\n          path=\"/login\"\n          render={() => {\n            return <LoginPage />;\n          }}\n        />\n        <Route\n          path=\"/new-article\"\n          render={(props) => (\n            <NewArticlePage\n              categories={categories}\n              onNewArticle={onNewArticle}\n              isAdmin={isAdmin}\n              accessToken={accessToken}\n            />\n          )}\n        />\n        <Route\n          path=\"/category/:category/article/:id/edit\"\n          render={(props) => (\n            <EditArticlePage\n              categories={categories}\n              onNewArticle={onNewArticle}\n              fetching={fetching}\n              isAdmin={isAdmin}\n              accessToken={accessToken}\n            />\n          )}\n        />\n        <Route\n          exact\n          path=\"/category/:category/article/:id\"\n          render={(props) => (\n            <ArticlePage\n              categories={categories}\n              fetching={fetching}\n              isAdmin={isAdmin}\n              onNewArticle={onNewArticle}\n              accessToken={accessToken}\n            />\n          )}\n        />\n        <Route\n          path=\"/category/:category/edit\"\n          render={(props) => (\n            <CategoryForm\n              onNewArticle={onNewArticle}\n              categories={categories}\n              action=\"put\"\n            />\n          )}\n        />\n        <Route\n          path=\"/category/:category\"\n          render={(props) => (\n            <Articles\n              categories={categories}\n              searchedTitle={searchedTitle}\n              fetching={fetching}\n              isAdmin={isAdmin}\n              onNewArticle={onNewArticle}\n              accessToken={accessToken}\n            />\n          )}\n        />\n        <Route\n          path=\"/new-category\"\n          render={(props) => (\n            <CategoryForm onNewArticle={onNewArticle} action=\"post\" />\n          )}\n        />\n        <Route component={NoMatch} />\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Auth0Provider } from '@auth0/auth0-react';\r\n\r\nconst Auth0ProviderWithHistory = ({ children }) => {\r\n  const domain = process.env.REACT_APP_AUTH0_DOMAIN;\r\n  const clientId = process.env.REACT_APP_AUTH0_CLIENT_ID;\r\n\r\n  const history = useHistory();\r\n\r\n  const onRedirectCallback = (appState) => {\r\n    history.push(appState?.returnTo || window.location.pathname);\r\n  };\r\n\r\n  return (\r\n    <Auth0Provider\r\n      domain={domain}\r\n      clientId={clientId}\r\n      redirectUri={window.location.origin}\r\n      audience={`http://localhost:5000/api`}\r\n      onRedirectCallback={onRedirectCallback}\r\n      scope=\"read:current_user\"\r\n    >\r\n      {children}\r\n    </Auth0Provider>\r\n  );\r\n};\r\n\r\nexport default Auth0ProviderWithHistory;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport Auth0ProviderWithHistory from './auth/Auth0ProviderWithHistory';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <Auth0ProviderWithHistory>\n        <App />\n      </Auth0ProviderWithHistory>\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}